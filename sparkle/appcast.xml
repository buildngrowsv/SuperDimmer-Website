<?xml version="1.0" standalone="yes"?>
<!--
    SuperDimmer Appcast - Sparkle Update Feed
    
    PURPOSE:
    This XML feed tells the Sparkle framework about available updates.
    The app checks this URL (configured in Info.plist as SUFeedURL) periodically.
    
    HOW IT WORKS:
    1. App starts → Sparkle checks this feed
    2. Compares sparkle:version with app's CFBundleVersion
    3. If newer version found → Shows update dialog
    4. User approves → Downloads DMG, verifies sparkle:edSignature
    5. Installs and relaunches
    
    FORMAT REFERENCE:
    - sparkle:version MUST match CFBundleVersion in Info.plist (internal build number)
    - sparkle:shortVersionString MUST match CFBundleShortVersionString (user-facing version)
    - sparkle:edSignature is generated by Sparkle's sign_update tool
    - length is file size in bytes (required for proper download)
    
    CHANNELS:
    - No channel tag = default/stable (everyone gets it)
    - <sparkle:channel>beta</sparkle:channel> = beta testers only
    - <sparkle:channel>internal</sparkle:channel> = internal testing
    
    TO ADD A NEW RELEASE:
    1. Build and sign the app with Developer ID
    2. Create DMG using packaging/create-dmg.sh
    3. Notarize with Apple
    4. Sign with EdDSA: ./sign_update SuperDimmer-vX.X.X.dmg
    5. Add new <item> block below (newest first)
    6. Upload DMG to releases/ folder
    7. Commit and push - Cloudflare auto-deploys
-->
<rss xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle" version="2.0">
    <channel>
        <title>SuperDimmer Updates</title>
        <link>https://superdimmer.com/</link>
        <description>Latest updates for SuperDimmer - Intelligent Screen Dimming for macOS</description>
        <language>en</language>
        
        <!-- 
        ================================================================
        CURRENT RELEASE - v1.0.1
        ================================================================
        Maintenance release with stability improvements.
        
        NOTE: EdDSA signature placeholder - generate with sign_update tool
        before shipping to production.
        ================================================================
        -->
        <item>
            <title>Version 1.0.1</title>
            <pubDate>Fri, 10 Jan 2026 17:09:00 -0800</pubDate>
            
            <sparkle:releaseNotesLink>
                https://superdimmer.com/release-notes/v1.0.1.html
            </sparkle:releaseNotesLink>
            
            <sparkle:version>7</sparkle:version>
            <sparkle:shortVersionString>1.0.1</sparkle:shortVersionString>
            
            <sparkle:minimumSystemVersion>13.0</sparkle:minimumSystemVersion>
            
            <enclosure 
                url="https://superdimmer.com/releases/SuperDimmer-v1.0.1.dmg" 
                length="2898886"
                type="application/octet-stream"
                sparkle:edSignature="REPLACE_WITH_ACTUAL_SIGNATURE_FROM_SIGN_UPDATE_TOOL=="/>
        </item>
        
        <!-- 
        ================================================================
        PREVIOUS RELEASE - v1.0.0
        ================================================================
        Initial release with core dimming features.
        
        TODO BEFORE FIRST REAL RELEASE:
        - Generate EdDSA keys with Sparkle's generate_keys tool
        - Sign the DMG with sign_update tool
        - Replace sparkle:edSignature with actual signature
        - Update length with actual file size in bytes
        ================================================================
        -->
        <item>
            <title>Version 1.0.0</title>
            <pubDate>Wed, 08 Jan 2026 12:00:00 -0800</pubDate>
            
            <!-- Release notes page (create this HTML file) -->
            <sparkle:releaseNotesLink>
                https://superdimmer.com/release-notes/v1.0.0.html
            </sparkle:releaseNotesLink>
            
            <!-- 
            VERSION NUMBERS (must match Info.plist exactly!):
            - sparkle:version = CFBundleVersion (increment each build)
            - sparkle:shortVersionString = CFBundleShortVersionString (user-facing)
            -->
            <sparkle:version>1</sparkle:version>
            <sparkle:shortVersionString>1.0.0</sparkle:shortVersionString>
            
            <!-- Minimum macOS version required -->
            <sparkle:minimumSystemVersion>13.0</sparkle:minimumSystemVersion>
            
            <!-- 
            DOWNLOAD ENCLOSURE:
            - url: HTTPS link to DMG (Cloudflare Pages serves this)
            - length: File size in bytes (get with: ls -l SuperDimmer-v1.0.0.dmg)
            - sparkle:edSignature: Run ./sign_update on the DMG
            
            PLACEHOLDER VALUES BELOW - Replace before shipping!
            -->
            <enclosure 
                url="https://superdimmer.com/releases/SuperDimmer-v1.0.0.dmg" 
                length="15000000"
                type="application/octet-stream"
                sparkle:edSignature="REPLACE_WITH_ACTUAL_SIGNATURE_FROM_SIGN_UPDATE_TOOL=="/>
        </item>
        
        <!--
        ================================================================
        TEMPLATE FOR FUTURE RELEASES
        ================================================================
        Copy this block for new releases, newest at top:
        
        <item>
            <title>Version X.X.X</title>
            <pubDate>Day, DD Mon YYYY HH:MM:SS +0000</pubDate>
            <sparkle:releaseNotesLink>
                https://superdimmer.com/release-notes/vX.X.X.html
            </sparkle:releaseNotesLink>
            <sparkle:version>BUILD_NUMBER</sparkle:version>
            <sparkle:shortVersionString>X.X.X</sparkle:shortVersionString>
            <sparkle:minimumSystemVersion>13.0</sparkle:minimumSystemVersion>
            <enclosure 
                url="https://superdimmer.com/releases/SuperDimmer-vX.X.X.dmg" 
                length="FILE_SIZE_BYTES"
                type="application/octet-stream"
                sparkle:edSignature="SIGNATURE=="/>
        </item>
        
        For beta releases, add:
            <sparkle:channel>beta</sparkle:channel>
        ================================================================
        -->
        
    </channel>
</rss>
